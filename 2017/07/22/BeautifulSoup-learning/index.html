<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="记性越来越差，只能把学过的东西记下来，不然白学"><title>BeautifulSoup学习 | 老姜工作室</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/6.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.2/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.2/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">BeautifulSoup学习</h1><a id="logo" href="/.">老姜工作室</a><p class="description">数据挖掘 | 编程 | 学习笔记</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">BeautifulSoup学习</h1><div class="post-meta">Jul 22, 2017<span> | </span><span class="category"><a href="/categories/爬虫/">爬虫</a></span><script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> 阅读</span></span></div><div class="clear"><div id="toc" class="toc-article"><div class="toc-title">文章目录</div><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#加载库"><span class="toc-number">1.</span> <span class="toc-text">加载库</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#findAll-和-find-匹配所以指定的标签"><span class="toc-number">2.</span> <span class="toc-text">findAll 和 find 匹配所以指定的标签</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#tag-标签"><span class="toc-number">2.1.</span> <span class="toc-text">tag 标签</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#attributes-属性"><span class="toc-number">2.2.</span> <span class="toc-text">attributes 属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#recursive-递归"><span class="toc-number">2.3.</span> <span class="toc-text">recursive 递归</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#text-文本参数"><span class="toc-number">2.4.</span> <span class="toc-text">text 文本参数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#limit-范围限制参数"><span class="toc-number">2.5.</span> <span class="toc-text">limit 范围限制参数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#keyword-关键词参数"><span class="toc-number">2.6.</span> <span class="toc-text">keyword 关键词参数</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#输出匹配到的字符"><span class="toc-number">3.</span> <span class="toc-text">输出匹配到的字符</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#获取属性"><span class="toc-number">4.</span> <span class="toc-text">获取属性</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#但是，这个库还有另外两种对象，虽然不常用，却应该了解一下。"><span class="toc-number">5.</span> <span class="toc-text">但是，这个库还有另外两种对象，虽然不常用，却应该了解一下。</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#导航树"><span class="toc-number">6.</span> <span class="toc-text">导航树</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#子标签"><span class="toc-number">6.1.</span> <span class="toc-text">子标签</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#html的表格结构："><span class="toc-number">6.2.</span> <span class="toc-text">html的表格结构：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#收集表格数据"><span class="toc-number">6.3.</span> <span class="toc-text">收集表格数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#html的表格结构：-1"><span class="toc-number">6.4.</span> <span class="toc-text">html的表格结构：</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#正则表达式"><span class="toc-number">7.</span> <span class="toc-text">正则表达式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#re-match"><span class="toc-number">7.1.</span> <span class="toc-text">re.match</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#re-search"><span class="toc-number">7.2.</span> <span class="toc-text">re.search</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#编译"><span class="toc-number">7.3.</span> <span class="toc-text">编译</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#分组"><span class="toc-number">7.4.</span> <span class="toc-text">分组</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#定义"><span class="toc-number">7.5.</span> <span class="toc-text">定义</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#在BeautifulSoup中使用正则"><span class="toc-number">7.6.</span> <span class="toc-text">在BeautifulSoup中使用正则</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#lambda-表达式"><span class="toc-number">8.</span> <span class="toc-text">lambda 表达式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#不仅仅是BeautifulSoup"><span class="toc-number">9.</span> <span class="toc-text">不仅仅是BeautifulSoup</span></a></li></ol></div></div><div class="post-content"><h2 id="加载库"><a href="#加载库" class="headerlink" title="加载库"></a>加载库</h2><figure class="highlight armasm"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="symbol">from</span> <span class="keyword">bs4 </span><span class="meta">import</span> <span class="keyword">BeautifuSoup</span></div></pre></td></tr></table></figure>
<p>PyCharm的配置<br>PyCharm’s Preferences -&gt; Project Interpreter -&gt; Add local -&gt; 选择Anaconda安装所在的文件下的bin/python</p>
<h2 id="findAll-和-find-匹配所以指定的标签"><a href="#findAll-和-find-匹配所以指定的标签" class="headerlink" title="findAll 和 find 匹配所以指定的标签"></a>findAll 和 find 匹配所以指定的标签</h2><ul>
<li>findAll: 标签组</li>
<li>find: 单个标签</li>
</ul>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="title">BeautifulSoup</span><span class="params">(html.read()</span></span>)</div><div class="line">name_list = bsObj.findAll(<span class="string">"span"</span>,&#123;<span class="string">"class"</span>,<span class="string">"green"</span>&#125;)</div></pre></td></tr></table></figure>
<p>参数：标签(tag)，+ 属性(attribute)（字典格式：{属性：属性值}）</p>
<p>都可以传递多个tag：.findAll({“h1”,”h2”,”h3”,”h4”,”h5”,”h6”})<br>可以匹配多个属性。.findAll(“span”, {“class”:{“green”, “red”}})，<strong>花括号</strong>。<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="title">findAll</span><span class="params">(tag, attributes, recursive, text, limit, keywords)</span></span> </div><div class="line"><span class="function"><span class="title">find</span><span class="params">(tag, attributes, recursive, text, keywords)</span></span></div></pre></td></tr></table></figure></p>
<p>放回的是列表（list）格式。</p>
<p><strong>注：</strong>find匹配到的标签块以后，还是可以继续接.tag来导航。</p>
<h3 id="tag-标签"><a href="#tag-标签" class="headerlink" title="tag 标签"></a>tag 标签</h3><p>标签参数 tag ——你可以传一个标签的名称或多个标签名称组成的 Python 列表做标签参数。</p>
<h3 id="attributes-属性"><a href="#attributes-属性" class="headerlink" title="attributes 属性"></a>attributes 属性</h3><p>属性参数 attributes 是用一个 Python 字典封装一个标签的若干属性和对应的属性值。</p>
<h3 id="recursive-递归"><a href="#recursive-递归" class="headerlink" title="recursive 递归"></a>recursive 递归</h3><p>递归参数 recursive 是一个布尔变量。你想抓取 HTML 文档标签结构里多少层的信息？如果 recursive 设置为 True ， findAll 就会根据你的要求去查找标签参数的所有子标签，以及子 标签的子标签。如果 recursive 设置为 False ， findAll 就只查找文档的一级标签，默认为True。</p>
<h3 id="text-文本参数"><a href="#text-文本参数" class="headerlink" title="text 文本参数"></a>text 文本参数</h3><p>文本参数 text 有点不同，它是用标签的文本内容去匹配，而不是用标签的属性。假如我们 想查找前面网页中包含“the prince”内容的标签数量， 我们可以把之前的 findAll 方法换 成下面的代码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">nameList = bsObj.findAll(text=<span class="string">"the prince"</span>)</div><div class="line"><span class="keyword">print</span> (len(nameList))</div></pre></td></tr></table></figure>
<h3 id="limit-范围限制参数"><a href="#limit-范围限制参数" class="headerlink" title="limit 范围限制参数"></a>limit 范围限制参数</h3><p>范围限制参数 limit ，显然只用于 findAll 方法。 find 其实等价于 findAll 的 limit 等于1 时的情形。 如果你只对网页中获取的前 x 项结果感兴趣， 就可以设置它。项结果是按照网页上的顺序排序的。</p>
<h3 id="keyword-关键词参数"><a href="#keyword-关键词参数" class="headerlink" title="keyword 关键词参数"></a>keyword 关键词参数</h3><p>可以让你选择那些具有指定属性的标签(和tag+attribute类似)，它是 BeautifulSoup 在 技术上做的一个冗余功能。</p>
<h2 id="输出匹配到的字符"><a href="#输出匹配到的字符" class="headerlink" title="输出匹配到的字符"></a>输出匹配到的字符</h2><p><strong>注：只有findAll以后才是存到列表里面，才可以迭代。</strong>，用点“.”的方式一层层索引无法进行迭代。<br>输出带标签的字符串：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span> name <span class="keyword">in</span> name_list:</div><div class="line">    print(name)</div></pre></td></tr></table></figure></p>
<p>输出不带标签的字符串.get_text()：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span> name <span class="keyword">in</span> name_list:</div><div class="line">    print(name).get_text()</div></pre></td></tr></table></figure>
<h2 id="获取属性"><a href="#获取属性" class="headerlink" title="获取属性"></a>获取属性</h2><p>两种方法：</p>
<ul>
<li>.get()</li>
<li>.attrs()<br>这两种方法的效果一样。<br><strong>注意：一点要找到tag的那一级语句，才能查找。</strong><br>例如：</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">next_url = bsObj.find(<span class="string">"li"</span>,&#123;<span class="string">"class"</span>:<span class="string">"next"</span>&#125;)</div><div class="line"><span class="keyword">print</span> next_url.find(<span class="string">"a"</span>).attrs[<span class="string">"href"</span>]</div></pre></td></tr></table></figure>
<p>或<br><code>print next_url.find(&quot;a&quot;).get(&quot;href&quot;)</code><br>下面这个是不行的：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">next_url = bsObj.find(<span class="string">"li"</span>,&#123;<span class="string">"class"</span>:<span class="string">"next"</span>&#125;)</div><div class="line"><span class="keyword">print</span> next_url.attrs[<span class="string">"href"</span>]</div></pre></td></tr></table></figure></p>
<p>因为href不是在li这个tag中，所以一定要是在同一个尖括号内<code>&lt; &gt;</code>.</p>
<p>对于一个标签对象，可以用下面的代码获取它的全部属性：</p>
<p><code>myTag.attrs</code></p>
<p>要注意这行代码返回的是一个 Python 字典对象，可以获取和操作这些属性。比如要获取图 片的资源位置 src ，可以用下面这行代码：</p>
<p><code>myImgTag.attrs[&quot;src&quot;]</code></p>
<h2 id="但是，这个库还有另外两种对象，虽然不常用，却应该了解一下。"><a href="#但是，这个库还有另外两种对象，虽然不常用，却应该了解一下。" class="headerlink" title="但是，这个库还有另外两种对象，虽然不常用，却应该了解一下。"></a>但是，这个库还有另外两种对象，虽然不常用，却应该了解一下。</h2><p>• NavigableString 对象</p>
<p>用来表示标签里的文字， 不是标签（有些函数可以操作和生成 NavigableString 对象， 而不是标签对象）。</p>
<p>• Comment 对象</p>
<p>用来查找 HTML 文档的注释标签， <!-- 像这样 --></p>
<p>这四个对象是你用 BeautifulSoup 库时会遇到的所有对象（写作本书的时候）。</p>
<h2 id="导航树"><a href="#导航树" class="headerlink" title="导航树"></a>导航树</h2><p>findAll通过标签的名称和属性来查找标签，如果通过标签在文档中的位置来查找标签，该怎么办？这就是导航树（Navigating Trees）的作用。</p>
<p>在 BeautifulSoup 库里， <strong>孩子 （child</strong>）和 <strong>后代 （descendant</strong>）有显著的 不同：和人类的家谱一样，子标签就是一个父标签的<strong>下一级</strong>，而后代标签是指一个父标签下面<strong>所有级别</strong>的标签。所有的子标签都是后代标 签，但不是所有的后代标签都是子标签。</p>
<h3 id="子标签"><a href="#子标签" class="headerlink" title="子标签"></a>子标签</h3><p>如果你只想找出子标签，可以用.children标签<br><strong>注：即只选取下一级，深度为1.</strong><br>可以使用chrome中的检测功能查看网页代码结构。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">html = urlopen(<span class="string">"http://www.pythonscraping.com/pages/page3.html"</span>)</div><div class="line">bsObj = BeautifulSoup(html.read())</div><div class="line"><span class="keyword">for</span> child <span class="keyword">in</span> bsObj.find(<span class="string">"table"</span>, &#123;<span class="string">"id"</span>:<span class="string">"giftList"</span>&#125;).children:</div><div class="line">    <span class="keyword">print</span> child</div></pre></td></tr></table></figure>
<h3 id="html的表格结构："><a href="#html的表格结构：" class="headerlink" title="html的表格结构："></a>html的表格结构：</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">table</span>&gt;</span>代表表格<span class="tag">&lt;/<span class="name">table</span>&gt;</span> </div><div class="line"><span class="tag">&lt;<span class="name">tr</span>&gt;</span>代表表格中的一行<span class="tag">&lt;/<span class="name">tr</span>&gt;</span> </div><div class="line"><span class="tag">&lt;<span class="name">td</span>&gt;</span>代表表格中的一列<span class="tag">&lt;/<span class="name">td</span>&gt;</span></div><div class="line"></div><div class="line">'tr'与'td'交成一个单元格</div><div class="line"><span class="tag">&lt;<span class="name">table</span>&gt;</span>...<span class="tag">&lt;/<span class="name">table</span>&gt;</span>之间有多少个<span class="tag">&lt;<span class="name">tr</span>&gt;</span>，就有多少行</div><div class="line"><span class="tag">&lt;<span class="name">tr</span>&gt;</span>...<span class="tag">&lt;/<span class="name">tr</span>&gt;</span>之间有多少个<span class="tag">&lt;<span class="name">td</span>&gt;</span>，就有多少列</div></pre></td></tr></table></figure>
<ul>
<li>tr: table row </li>
<li>td: table data<br>tr中是td，一行中有n个数据。</li>
</ul>
<h3 id="收集表格数据"><a href="#收集表格数据" class="headerlink" title="收集表格数据"></a>收集表格数据</h3><p>BeautifulSoup 的 next_siblings() 函数可以让收集表格数据成为简单的事情， 尤其是处理 带标题行的表格：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> urllib.request <span class="keyword">import</span> urlopen <span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup </div><div class="line">html = urlopen(<span class="string">"http://www.pythonscraping.com/pages/page3.html"</span>) </div><div class="line">bsObj = BeautifulSoup(html)</div><div class="line"></div><div class="line"><span class="keyword">for</span> sibling <span class="keyword">in</span> bsObj.find(<span class="string">"table"</span>,&#123;<span class="string">"id"</span>:<span class="string">"giftList"</span>&#125;).tr.next_siblings: </div><div class="line">    <span class="keyword">print</span> (sibling)</div></pre></td></tr></table></figure>
<p>这段代码会打印产品列表里的所有行的产品，第一行表格标题除外。为什么标题行被跳过 了呢？有两个理由。首先，对象不能把自己作为兄弟标签。任何时候你获取一个标签的兄 弟标签，都不会包含这个标签本身。其次，这个函数只调用后面的兄弟标签。例如，如果 我们选择一组标签中位于中间位置的一个标签，然后用 next_siblings() 函数，那么它就 只会返回在它后面的兄弟标签。 因此， 选择标签行然后调用 next_siblings ， 可以选择表 格中除了标题行以外的所有行。</p>
<h3 id="html的表格结构：-1"><a href="#html的表格结构：-1" class="headerlink" title="html的表格结构："></a>html的表格结构：</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">table</span>&gt;</span>代表表格<span class="tag">&lt;/<span class="name">table</span>&gt;</span> </div><div class="line"><span class="tag">&lt;<span class="name">tr</span>&gt;</span>代表表格中的一行<span class="tag">&lt;/<span class="name">tr</span>&gt;</span> </div><div class="line"><span class="tag">&lt;<span class="name">td</span>&gt;</span>代表表格中的一列<span class="tag">&lt;/<span class="name">td</span>&gt;</span></div><div class="line"></div><div class="line">'tr'与'td'交成一个单元格</div><div class="line"><span class="tag">&lt;<span class="name">table</span>&gt;</span>...<span class="tag">&lt;/<span class="name">table</span>&gt;</span>之间有多少个<span class="tag">&lt;<span class="name">tr</span>&gt;</span>，就有多少行</div><div class="line"><span class="tag">&lt;<span class="name">tr</span>&gt;</span>...<span class="tag">&lt;/<span class="name">tr</span>&gt;</span>之间有多少个<span class="tag">&lt;<span class="name">td</span>&gt;</span>，就有多少列</div></pre></td></tr></table></figure>
<ul>
<li>tr: table row </li>
<li><p>td: table data<br>tr中是td，一行中有n个数据。</p>
<h2 id="正则表达式"><a href="#正则表达式" class="headerlink" title="正则表达式"></a>正则表达式</h2><p>包括re.match, re.search, 预编译, group()。<a href="https://www.runoob.com/python/python-reg-expressions.html" target="_blank" rel="external">链接</a>。</p>
<h3 id="re-match"><a href="#re-match" class="headerlink" title="re.match"></a>re.match</h3><p>re.match 尝试从字符串的<strong><em>起始位置</em></strong>匹配一个模式，如果不是起始位置匹配成功的话，match()就返回none。<br><code>re.match(pattern, string, flags=0)</code></p>
</li>
<li><p>flags:<strong>标志位</strong>，用于控制正则表达式的匹配方式，如：是否区分大小写，多行匹配等等。</p>
</li>
<li>group(): 匹配的整个表达式的字符串，group() 可以一次输入多个组号，在这种情况下它将返回一个包含那些组所对应值的元组。</li>
<li>还有一个groups():暂时不用</li>
</ul>
<h3 id="re-search"><a href="#re-search" class="headerlink" title="re.search"></a>re.search</h3><p>re.search 扫描<strong>整个字符串</strong>并返回<strong>第一个成功</strong>的匹配。</p>
<h3 id="编译"><a href="#编译" class="headerlink" title="编译"></a>编译</h3><p>当我们在Python中使用正则表达式时，re模块内部会干两件事情：</p>
<ol>
<li>编译正则表达式，如果正则表达式的字符串本身不合法，会报错；</li>
<li>用编译后的正则表达式去匹配字符串。</li>
</ol>
<p>所以，如果一个正则表达式需要重复使用，可以先进行<strong><em>预编译</em></strong>，加快运算速度。<br>接下来重复使用时就不需要编译这个步骤了，直接匹配： </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> re</div><div class="line"><span class="comment"># 编译:</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>re_telephone = re.compile(<span class="string">r'^(\d&#123;3&#125;)-(\d&#123;3,8&#125;)$'</span>)</div><div class="line"><span class="comment"># 使用：</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>re_telephone.match(<span class="string">'010-12345'</span>).groups()</div><div class="line">(<span class="string">'010'</span>, <span class="string">'12345'</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>re_telephone.match(<span class="string">'010-8086'</span>).groups()</div><div class="line">(<span class="string">'010'</span>, <span class="string">'8086'</span>)</div></pre></td></tr></table></figure>
<h3 id="分组"><a href="#分组" class="headerlink" title="分组"></a>分组</h3><p>使用()进行分组。<br>注意到group(0)永远是原始字符串，group(1)、group(2)……表示第1、2、……个子串。</p>
<h3 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h3><p><img src="/2017/07/22/BeautifulSoup-learning/regex.png" alt=""></p>
<h3 id="在BeautifulSoup中使用正则"><a href="#在BeautifulSoup中使用正则" class="headerlink" title="在BeautifulSoup中使用正则"></a>在BeautifulSoup中使用正则</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> urllib.request <span class="keyword">import</span> urlopen </div><div class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup </div><div class="line"><span class="keyword">import</span> re</div><div class="line"></div><div class="line">html = urlopen(<span class="string">"http://www.pythonscraping.com/pages/page3.html"</span>) </div><div class="line">bsObj = BeautifulSoup(html) </div><div class="line">images = bsObj.findAll(<span class="string">"img"</span>,&#123;<span class="string">"src"</span>:re.compile(<span class="string">"\.\.\/img\/gifts/img.*\.jpg"</span>)&#125;) </div><div class="line"></div><div class="line"><span class="keyword">for</span> image <span class="keyword">in</span> images: </div><div class="line">    <span class="keyword">print</span> (image[<span class="string">"src"</span>])</div></pre></td></tr></table></figure>
<h2 id="lambda-表达式"><a href="#lambda-表达式" class="headerlink" title="lambda 表达式"></a>lambda 表达式</h2><p>lambda表达式是正则的一个替代方案，他在find中使用的时候，作为参数，返回值是一个bool值，放回值为真的是满足条件的。</p>
<p>Lambda 表达式本质上就是一个函数，可以作为其他函数的变量使用；也就是说，一个函 数不是定义成 f(x, y) ，而是定义成 f(g(x), y) ，或 f(g(x), h(x)) 的形式。</p>
<p>BeautifulSoup 允许我们把特定函数类型当作 findAll 函数的参数。</p>
<p>BeautifulSoup 用这个函数来评估它 遇到的每个标签对象，最后把评估结果为“真”的标签保留，把其他标签剔除。</p>
<p>例如，下面的代码就是获取有两个属性的标签：</p>
<p><code>soup.findAll(lambda tag: len(tag.attrs) == 2)</code><br>这行代码会找出下面的标签：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;div &lt;span class="body" id="content" &gt;&lt;/div&gt; style="color:red" class="title"&gt;&lt;/span&gt;</div></pre></td></tr></table></figure>
<h2 id="不仅仅是BeautifulSoup"><a href="#不仅仅是BeautifulSoup" class="headerlink" title="不仅仅是BeautifulSoup"></a>不仅仅是BeautifulSoup</h2><p>虽然用 BeautifulSoup（也是 Python 里最受欢迎的 HTML 解析库之一）很好，但它并不 是你唯一的选择。如果 BeautifulSoup 不能满足你的需求，你可以看看其他的库。</p>
<ul>
<li>lxml</li>
<li>HTML parser</li>
<li>xpath</li>
</ul>
</div><script type="text/javascript" src="/js/share.js?v=0.0.0" async></script><a data-url="http://zhiqiang.studio/2017/07/22/BeautifulSoup-learning/" data-id="cj5jiuphz000bezhwokl4jqhd" class="article-share-link">分享</a><div class="tags"><a href="/tags/BeautifulSoup/">BeautifulSoup</a></div><div class="post-nav"><a href="/2017/07/23/数据分析在做什么/" class="pre">数据分析在做什么</a><a href="/2017/07/21/pachong2/" class="next">爬虫背景调研学习笔记</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Hexo/">Hexo</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Leetcode刷题/">Leetcode刷题</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Matlab/">Matlab</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/">Python</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/R语言/">R语言</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/matplotlib/">matplotlib</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/sklearn/">sklearn</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/数据分析/">数据分析</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/数据库/">数据库</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/机器学习/">机器学习</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/爬虫/">爬虫</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/随笔/">随笔</a><span class="category-list-count">2</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/matplotlib/" style="font-size: 15px;">matplotlib</a> <a href="/tags/easy/" style="font-size: 15px;">easy</a> <a href="/tags/BeautifulSoup/" style="font-size: 15px;">BeautifulSoup</a> <a href="/tags/R语言/" style="font-size: 15px;">R语言</a> <a href="/tags/无监督/" style="font-size: 15px;">无监督</a> <a href="/tags/Matlab/" style="font-size: 15px;">Matlab</a> <a href="/tags/监督学习/" style="font-size: 15px;">监督学习</a> <a href="/tags/工作流程/" style="font-size: 15px;">工作流程</a> <a href="/tags/数学/" style="font-size: 15px;">数学</a> <a href="/tags/可视化/" style="font-size: 15px;">可视化</a> <a href="/tags/sql/" style="font-size: 15px;">sql</a> <a href="/tags/numpy/" style="font-size: 15px;">numpy</a> <a href="/tags/http/" style="font-size: 15px;">http</a> <a href="/tags/爬虫/" style="font-size: 15px;">爬虫</a> <a href="/tags/Python/" style="font-size: 15px;">Python</a> <a href="/tags/sklearn/" style="font-size: 15px;">sklearn</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2017/07/24/Funnel/">漏斗图</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/23/数据分析在做什么/">数据分析在做什么</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/22/BeautifulSoup-learning/">BeautifulSoup学习</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/21/pachong2/">爬虫背景调研学习笔记</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/20/pachong-learning/">爬虫 http协议</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/20/mult-plot/">python 画多个子图</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/18/python-json/">python-json</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/18/python-note/">python note</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/14/sql-function/">sql 内建函数</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/14/mysql-learning/">sql 基本语法</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="http://blog.csdn.net/u012925804" title="My CSDN" target="_blank">My CSDN</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2017 <a href="/." rel="nofollow">老姜工作室.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a id="rocket" href="#top" class="show"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/3.0.47/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/3.0.47/jquery.fancybox.min.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>